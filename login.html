<!doctype html>
<html lang="en" class="h-full bg-white">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./dist/output.css" rel="stylesheet">
    <title>K-Wiki</title>
</head>

<body class="h-full">
    <div id="app">
        <div class="bg-white">
            <!-- Header -->
            <header id="header" class="mb-14">
            </header>

            <main>
                <div class="flex items-center justify-center min-h-full px-4 py-12 sm:px-6 lg:px-8">
                    <div class="w-full max-w-sm space-y-10">
                        <div>
                            <h2 class="mt-10 font-bold tracking-tight text-center text-gray-900 text-2xl/9">Login</h2>
                        </div>
                        <form class="space-y-6" x-data="{ email: '', password: '' }" x-on:submit.prevent="
                            const req = await fetch('http://localhost:5123/login', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ email, password }),
                            });

                            if (!req.ok) {
                                alert('Error');
                                return;
                            }

                            const res = await req.json();

                            localStorage.setItem('accessToken', res.accessToken);
                            localStorage.setItem('refreshToken', res.refreshToken);
                            window.location.href = '/';
                        ">
                            <div class="relative -space-y-px rounded-md shadow-sm">
                                <div
                                    class="absolute inset-0 z-10 rounded-md pointer-events-none ring-1 ring-inset ring-gray-300">
                                </div>
                                <div>
                                    <label for="email-address" class="sr-only">Email address</label>
                                    <input x-model="email" id="email-address" name="email" type="email"
                                        autocomplete="email" required
                                        class="relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-100 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm/6"
                                        placeholder="Email address">
                                </div>
                                <div>
                                    <label for="password" class="sr-only">Password</label>
                                    <input x-model="password" id="password" name="password" type="password"
                                        autocomplete="current-password" required
                                        class="relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-100 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm/6"
                                        placeholder="Password">
                                </div>
                            </div>

                            <div>
                                <button type="submit"
                                    class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Login</button>
                            </div>
                        </form>

                        <p class="text-center text-gray-500 text-sm/6">
                            Not a member?
                            <a href="/register" class="font-semibold text-indigo-600 hover:text-indigo-500">Join us!</a>
                        </p>
                    </div>
                </div>
            </main>

            <!-- Footer -->
            <footer id="footer" class="mt-16 sm:mt-32">
            </footer>
        </div>
    </div>

    <script type="module" src="/main.js"></script>
</body>

</html>